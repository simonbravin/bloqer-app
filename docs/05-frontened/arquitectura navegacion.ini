
ğŸ“ ARQUITECTURA DE NAVEGACIÃ“N
DecisiÃ³n clave: Layout DinÃ¡mico
El sistema tiene DOS contextos de navegaciÃ³n:

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ROOT LAYOUT (apps/web/app/[locale]/layout.tsx)     â”‚
â”‚ - Auth Provider                                     â”‚
â”‚ - Theme Provider                                    â”‚
â”‚ - i18n Provider                                     â”‚
â”‚ - TanStack Query Provider                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â”œâ”€â”€â”€ (auth) - Login/Register
                       â”‚
                       â””â”€â”€â”€ (dashboard) â”€â”€â”
                                          â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                                                                     â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ GLOBAL CONTEXT   â”‚                                     â”‚  PROJECT CONTEXT          â”‚
â”‚                  â”‚                                     â”‚                           â”‚
â”‚ Layout: Global   â”‚                                     â”‚  Layout: Project          â”‚
â”‚ Sidebar:         â”‚                                     â”‚  Sidebar:                 â”‚
â”‚ - Dashboard      â”‚                                     â”‚  - Dashboard Proyecto     â”‚
â”‚ - Proyectos      â”‚                                     â”‚  - Presupuesto           â”‚
â”‚ - Equipo         â”‚                                     â”‚  - Cronograma            â”‚
â”‚ - Inventario     â”‚                                     â”‚  - Finanzas              â”‚
â”‚ - Proveedores    â”‚                                     â”‚  - Certificaciones       â”‚
â”‚ - Documentos     â”‚                                     â”‚  - Calidad (RFI)         â”‚
â”‚ - ConfiguraciÃ³n  â”‚                                     â”‚  - Libro de Obra         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                     â”‚  - Documentos            â”‚
                                                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Estructura de Rutas en App Router

apps/web/app/[locale]
â”‚
â”œâ”€â”€ (auth)/
â”‚   â”œâ”€â”€ login/page.tsx
â”‚   â”œâ”€â”€ register/page.tsx
â”‚   â””â”€â”€ layout.tsx (sin sidebar)
â”‚
â””â”€â”€ (dashboard)/
    â”œâ”€â”€ layout.tsx (elige sidebar dinÃ¡micamente)
    â”‚
    â”œâ”€â”€ dashboard/page.tsx (Global Dashboard)
    â”œâ”€â”€ projects/page.tsx (Lista de proyectos)
    â”œâ”€â”€ team/page.tsx (Equipo de la org)
    â”œâ”€â”€ inventory/page.tsx (Inventario central)
    â”œâ”€â”€ suppliers/
    â”‚   â”œâ”€â”€ page.tsx (Mis proveedores)
    â”‚   â””â”€â”€ global/page.tsx (Directorio global)
    â”œâ”€â”€ documents/page.tsx (Documentos org)
    â”œâ”€â”€ settings/page.tsx
    â”‚
    â””â”€â”€ projects/[id]/
        â”œâ”€â”€ layout.tsx (PROJECT LAYOUT - cambia sidebar)
        â”œâ”€â”€ page.tsx (Dashboard del proyecto)
        â”œâ”€â”€ budget/
        â”‚   â”œâ”€â”€ page.tsx (Lista versiones)
        â”‚   â”œâ”€â”€ [versionId]/
        â”‚   â”‚   â”œâ”€â”€ page.tsx (Detalle versiÃ³n)
        â”‚   â”‚   â””â”€â”€ compute/page.tsx (Planilla de cÃ³mputo)
        â”‚   â””â”€â”€ new/page.tsx
        â”œâ”€â”€ wbs/page.tsx
        â”œâ”€â”€ change-orders/
        â”‚   â”œâ”€â”€ page.tsx
        â”‚   â”œâ”€â”€ [id]/page.tsx
        â”‚   â””â”€â”€ new/page.tsx
        â”œâ”€â”€ finance/
        â”‚   â”œâ”€â”€ transactions/page.tsx
        â”‚   â”œâ”€â”€ certifications/page.tsx
        â”‚   â””â”€â”€ cashflow/page.tsx
        â”œâ”€â”€ schedule/page.tsx (Gantt)
        â”œâ”€â”€ quality/
        â”‚   â”œâ”€â”€ rfis/page.tsx
        â”‚   â””â”€â”€ submittals/page.tsx
        â”œâ”€â”€ daily-reports/page.tsx
        â”œâ”€â”€ documents/page.tsx
        â””â”€â”€ settings/page.tsx



ğŸ¨ ESTRATEGIA DE UI/UX
// apps/web/app/globals.css
:root {
  /* Primary - Navy/Midnight Blue */
  --primary-50: 240 249 255;
  --primary-100: 224 242 254;
  --primary-200: 186 230 253;
  --primary-500: 14 165 233; // Sky blue
  --primary-600: 2 132 199;
  --primary-700: 3 105 161;
  --primary-900: 12 74 110; // Navy para sidebar
  
  /* Neutral - Slate */
  --slate-50: 248 250 252;
  --slate-100: 241 245 249;
  --slate-200: 226 232 240;
  --slate-700: 51 65 85;
  --slate-900: 15 23 42;
  
  /* Semantic Colors */
  --success: 34 197 94; // Green
  --warning: 251 146 60; // Orange
  --danger: 239 68 68; // Red
  --info: 59 130 246; // Blue
}

Layout Components EstÃ¡ndar
1. PageHeader Component

// components/layout/page-header.tsx
interface PageHeaderProps {
  title: string
  subtitle?: string
  breadcrumbs?: Array<{ label: string; href?: string }>
  actions?: React.ReactNode
  filters?: React.ReactNode
}

export function PageHeader({
  title,
  subtitle,
  breadcrumbs,
  actions,
  filters
}: PageHeaderProps) {
  return (
    <div className="border-b border-slate-200 bg-white px-6 py-4">
      {breadcrumbs && <Breadcrumbs items={breadcrumbs} />}
      
      <div className="flex items-center justify-between">
        <div>
          <h1 className="text-2xl font-semibold text-slate-900">{title}</h1>
          {subtitle && (
            <p className="mt-1 text-sm text-slate-500">{subtitle}</p>
          )}
        </div>
        
        {actions && (
          <div className="flex items-center gap-2">{actions}</div>
        )}
      </div>
      
      {filters && (
        <div className="mt-4">{filters}</div>
      )}
    </div>
  )
}

2. Dynamic Sidebar
// components/layout/dynamic-sidebar.tsx
'use client'

import { usePathname } from 'next/navigation'
import { GlobalNavigation } from './global-navigation'
import { ProjectNavigation } from './project-navigation'

export function DynamicSidebar() {
  const pathname = usePathname()
  
  // Si estamos en un proyecto, mostrar navegaciÃ³n de proyecto
  const isProjectContext = pathname.includes('/projects/') && 
                           pathname.split('/').length > 4
  
  if (isProjectContext) {
    const projectId = pathname.split('/')[3] // /es/projects/[id]/...
    return <ProjectNavigation projectId={projectId} />
  }
  
  return <GlobalNavigation />
}

3. Breadcrumbs DinÃ¡micos
// components/layout/breadcrumbs.tsx
'use client'

import { usePathname } from 'next/navigation'
import { useTranslations } from 'next-intl'
import Link from 'next/link'

export function DynamicBreadcrumbs() {
  const pathname = usePathname()
  const t = useTranslations('navigation')
  
  const segments = pathname.split('/').filter(Boolean)
  
  // Generar breadcrumbs automÃ¡ticamente
  const breadcrumbs = segments.map((segment, index) => {
    const href = '/' + segments.slice(0, index + 1).join('/')
    const label = translateSegment(segment, t)
    
    return { label, href }
  })
  
  return (
    <nav className="flex" aria-label="Breadcrumb">
      {breadcrumbs.map((crumb, i) => (
        <div key={i} className="flex items-center">
          {i > 0 && <span className="mx-2 text-slate-400">/</span>}
          {i === breadcrumbs.length - 1 ? (
            <span className="font-medium text-slate-900">{crumb.label}</span>
          ) : (
            <Link href={crumb.href} className="text-slate-600 hover:text-slate-900">
              {crumb.label}
            </Link>
          )}
        </div>
      ))}
    </nav>
  )
}
